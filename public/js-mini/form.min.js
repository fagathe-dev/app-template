class FormManager{constructor({form:e,initialData:a}){this.form=e,this.initialData=a,this.init()}getData(){var e,a,t,i;const r=this.form.querySelectorAll(FormManager.FORM_FIELD_SELECTOR),s={};for(const l of r){const{tagName:r,name:o}=l;switch(r){case"INPUT":const{type:r,value:n}=l;if(s.hasOwnProperty(o))continue;if("checkbox"===r||"radio"===r){const t=this.form.querySelectorAll(`input[name="${o}"]:checked`);Array.from(t).length>1?t.forEach((e=>{s.hasOwnProperty(o)||(s[o]=[]),s[o].push(e.value)})):s[o]=null!==(a=null===(e=this.form.querySelector(`input[name="${o}"]:checked`))||void 0===e?void 0:e.value)&&void 0!==a?a:null}"text"!==r&&"number"!==r&&"date"!==r&&"datetime"!==r&&"password"!==r&&"hidden"!==r||(s[o]=""===n?null:n);break;case"SELECT":const c=this.form.querySelectorAll(`select[name="${o}"] option`);Array.from(c).filter((e=>e.selected)).length>1?this.form.querySelectorAll(`select[name="${o}"] option`).forEach((e=>{s.hasOwnProperty(o)||(s[o]=[]),e.selected&&s[o].push(e.value)})):s[o]=null!==(i=null===(t=this.form.querySelector(`select[name="${o}"]`))||void 0===t?void 0:t.value)&&void 0!==i?i:null;break;case"TEXTAREA":s[o]=l.value}}return s}fillData(e){const a=this.form.querySelectorAll(FormManager.FORM_FIELD_SELECTOR);for(const t of a){const{tagName:a,name:i}=t;if(e.hasOwnProperty(i)){const r=e[i];switch(a){case"INPUT":const{type:e,value:a}=t;"checkbox"!==e&&"radio"!==e||(Array.isArray(r)&&r.forEach((e=>{a===e&&(t.checked=!0)})),!1!==r&&null!==r||(t.checked=!1),!0===r&&(t.checked=!0)),"text"!==e&&"number"!==e&&"date"!==e&&"datetime"!==e&&"password"!==e&&"hidden"!==e||(t.value=r);break;case"SELECT":const{options:i}=t;if(Array.isArray(r))Array.from(i).forEach((e=>{e.selected=r.includes(e.value)}));else{if(null===r||""===r)continue;{const e=Array.from(i).find((e=>e.value===r));e&&(e.selected=!0)}}break;case"TEXTAREA":t.value=r}}}}validateData(e){const a=this.form.querySelectorAll(FormManager.FORM_FIELD_SELECTOR);for(const t of a){const{tagName:a,name:i}=t,r=t.closest("fieldset")||t.closest("div");let s=r.querySelector(".invalid-feedback");if(e.hasOwnProperty(i)){if("INPUT"===a&&"checkbox"===t.type||"radio"===t.type){this.form.querySelectorAll(`input[name="${i}"]`).forEach((e=>{e.classList.add("is-invalid")}))}else t.classList.add("is-invalid");null===s&&(s=document.createElement("small"),s.innerHTML=e[i],s.classList.add("invalid-feedback"),r.insertAdjacentElement("beforeend",s))}else t.classList.remove("is-invalid"),t.classList.add("is-valid"),null!==s&&s.remove()}}reset(){this.form.querySelectorAll(FormManager.FORM_FIELD_SELECTOR).forEach((e=>{const{tagName:a}=e,t=(e.closest("fieldset")||e.closest("div")).querySelector(".invalid-feedback, valid-feedback");if("INPUT"===a){const{type:a}=e;"checkbox"!==a&&"radio"!==a||(e.checked=!1),"text"!==a&&"number"!==a&&"date"!==a&&"datetime"!==a&&"password"!==a&&"hidden"!==a||(e.value="")}if("SELECT"===a){const{options:a}=e;Array.from(a).forEach((e=>e.selected=!1))}"TEXTAREA"===a&&(e.value=""),e.classList.remove("is-valid","is-invalid"),t&&t.remove()}))}init(){this.form.addEventListener("reset",(e=>{e.preventDefault(),this.reset()})),this.initialData&&this.fillData(this.initialData)}}FormManager.FORM_FIELD_SELECTOR="input, select, textarea";const initialData={transport:["Train","Bus"],isActive:!1,exampleSelect:"4",password:"testPassword",dueDate:"2002-01-12",message:"kkdlkdlkdldlkdl\n\n\ndlekfle\n\n\nd;mdlmd\n"},violations={transport:"This field is required",isActive:"This field is required",message:"This field is required",dueDate:"This field is required"},formManager=new FormManager({form:document.getElementById("formManagerId"),initialData:initialData});formManager.validateData(violations);